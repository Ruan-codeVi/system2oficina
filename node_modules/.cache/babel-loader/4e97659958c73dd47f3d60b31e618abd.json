{"ast":null,"code":"import _regeneratorRuntime from\"/home/juan/Documentos/Front-End_Projetos-React.js/oficina/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/juan/Documentos/Front-End_Projetos-React.js/oficina/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/juan/Documentos/Front-End_Projetos-React.js/oficina/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import Title from'../../components/Title';import Header from'../../components/Header';import{FiPlus}from'react-icons/fi';import'./new.css';import{toast}from'react-toastify';import{useState,useEffect,useContext}from'react';import{AuthContext}from'../../contexts/auth';import firebase from'../../services/firebaseConnection';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Novo(){// Contexto\nvar _useContext=useContext(AuthContext),user=_useContext.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),clientes=_useState2[0],setClientes=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading_Cli=_useState4[0],setLoading_Cli=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),clienteSelect=_useState6[0],setClienteSelect=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),auto=_useState8[0],setAuto=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),placa=_useState10[0],setPlaca=_useState10[1];var _useState11=useState('Avaliacao'),_useState12=_slicedToArray(_useState11,2),servico=_useState12[0],setServico=_useState12[1];var _useState13=useState('Aberto'),_useState14=_slicedToArray(_useState13,2),status=_useState14[0],setStatus=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),complemento=_useState16[0],setComplemento=_useState16[1];// Chama quando abre a aplicação\nuseEffect(function(){// Vai trazer clientes la do firebase quando aplicação abrir \nfunction carregaClientes_Firebase(){return _carregaClientes_Firebase.apply(this,arguments);}function _carregaClientes_Firebase(){_carregaClientes_Firebase=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return firebase.firestore().collection('clientes').get()//pegar\n.then(function(snapshot){// caso de sucesso, recebe snpashot de cliente\nvar lista=[];snapshot.forEach(function(doc){//dentro de cliente, para cada documento da um push em obj\nlista.push({id:doc.id,nome:doc.data().nome});});// Verificando se lista não esta vazia\nif(lista.length===0){console.log('Nenhum cliente encontrado');setClientes([{id:'1',cliente:''}]);setLoading_Cli(false);return;}setClientes(lista);setLoading_Cli(false);}).catch(function(erro){console.log(erro);setLoading_Cli(false);setClientes([{id:'1',cliente:''}]);});case 2:case\"end\":return _context.stop();}}},_callee);}));return _carregaClientes_Firebase.apply(this,arguments);}carregaClientes_Firebase();},[]);// Chamando quando clica em cadastrar\nfunction handleRegistrarCliente_Firebase(_x){return _handleRegistrarCliente_Firebase.apply(this,arguments);}// Chamado quando troca serviço e manda pra state\nfunction _handleRegistrarCliente_Firebase(){_handleRegistrarCliente_Firebase=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.next=3;return firebase.firestore().collection('chamados').add({criado:new Date(),cliente:clientes[clienteSelect].nome,clienteID:clientes[clienteSelect].id,auto:auto,placa:placa,servico:servico,status:status,complemento:complemento,userID:user.uid// usuario que ta cadastrando chamado\n}).then(function(){toast.success('Chamando cadastrado com sucesso!');setAuto('');setPlaca('');setServico('Avaliacao');setStatus('Aberto');setClienteSelect(0);setComplemento('');}).catch(function(erro){console.log(erro);toast.error('Falha a tentar cadastrar!, tente mais tarde.');});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _handleRegistrarCliente_Firebase.apply(this,arguments);}function trocaServico_Select(e){setServico(e.target.value);console.log(e.target.value);}// Chamado quando troca o status, e manda para o state\nfunction trocaStatusRadio(e){setStatus(e.target.value);console.log(e.target.value);}// chamado quando troca cliente\nfunction handleTrocaCliente(e){console.log('index do cli selecionado',e.target.value);console.log('Cliente selecionado',clientes[e.target.value]);setClienteSelect(e.target.value);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(Title,{name:\"Novo Chamado\",children:/*#__PURE__*/_jsx(FiPlus,{size:25})}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"form-profile\",onSubmit:handleRegistrarCliente_Firebase,children:[/*#__PURE__*/_jsx(\"label\",{className:\"tipo\",children:\"Pessoa F\\xEDsica / Empresa - cnpj\"}),loading_Cli?/*#__PURE__*/_jsx(\"input\",{type:\"text\",disabled:true,value:\"Carregando clientes...\"}):/*#__PURE__*/_jsx(\"select\",{value:clienteSelect,onChange:handleTrocaCliente,children:clientes.map(function(item,index){return/*#__PURE__*/_jsx(\"option\",{value:index,children:item.nome},item.id);})}),/*#__PURE__*/_jsx(\"label\",{children:\"Autom\\xF3vel\"}),/*#__PURE__*/_jsx(\"input\",{className:\"auto\",type:\"text\",placeholder:\"Marca ou Modelo\",value:auto,onChange:function onChange(e){return setAuto(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\"Placa\"}),/*#__PURE__*/_jsx(\"input\",{className:\"placa\",type:\"text\",placeholder:\"aaaa000\",value:placa,onChange:function onChange(e){return setPlaca(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\"Servi\\xE7o\"}),/*#__PURE__*/_jsxs(\"select\",{value:servico,onChange:trocaServico_Select,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Avaliacao\",children:\"Avalia\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Revisao\",children:\"Revis\\xE3o\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Revisao obrigatoria\",children:\"Revis\\xE3o obrigat\\xF3ria\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Troca de Bateria\",children:\"Troca de bateria\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Alinhamento/Balanceamento\",children:\"Alinhamento/Balanceamento\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Filtro/\\xF3leo\",children:\"Filtro/\\xF3leo\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Freios\",children:\"Freios\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Supensao\",children:\"Supens\\xE3o\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Escapamento\",children:\"Escapamento\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Motor\",children:\"Motor\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Cambio\",children:\"C\\xE2mbio\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Eletrica\",children:\"Eletrica\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Computador de bordo\",children:\"Computador de bordo\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Remap\",children:\"Remap\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Troca de peca\",children:\"Troca de pe\\xE7as\"})]}),/*#__PURE__*/_jsx(\"label\",{children:\"Status\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"status\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"radio\",value:\"Aberto\",onChange:trocaStatusRadio,checked:status==='Aberto'}),/*#__PURE__*/_jsx(\"span\",{children:\"Em Aberto\"}),/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"radio\",value:\"Progresso\",onChange:trocaStatusRadio,checked:status==='Progresso'}),/*#__PURE__*/_jsx(\"span\",{children:\"Em Progresso\"}),/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"radio\",value:\"Finalizado\",onChange:trocaStatusRadio,checked:status==='Finalizado'}),/*#__PURE__*/_jsx(\"span\",{children:\"Finalizado\"})]}),/*#__PURE__*/_jsx(\"label\",{children:\"Complemento\"}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",placeholder:\"Observa\\xE7\\xF5es (Opcional).\",value:complemento,onChange:function onChange(e){return setComplemento(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"cadastrar\",type:\"submit\",children:\"Cadastrar\"})]})})]})]});}","map":{"version":3,"sources":["/home/juan/Documentos/Front-End_Projetos-React.js/oficina/src/pages/New/index.js"],"names":["Title","Header","FiPlus","toast","useState","useEffect","useContext","AuthContext","firebase","Novo","user","clientes","setClientes","loading_Cli","setLoading_Cli","clienteSelect","setClienteSelect","auto","setAuto","placa","setPlaca","servico","setServico","status","setStatus","complemento","setComplemento","carregaClientes_Firebase","firestore","collection","get","then","snapshot","lista","forEach","doc","push","id","nome","data","length","console","log","cliente","catch","erro","handleRegistrarCliente_Firebase","e","preventDefault","add","criado","Date","clienteID","userID","uid","success","error","trocaServico_Select","target","value","trocaStatusRadio","handleTrocaCliente","map","item","index"],"mappings":"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","sourcesContent":["\nimport Title from '../../components/Title'\nimport Header from '../../components/Header'\nimport { FiPlus } from 'react-icons/fi'\nimport './new.css'\nimport {toast} from 'react-toastify'\n\nimport {useState, useEffect, useContext} from 'react'  \nimport { AuthContext } from '../../contexts/auth'\nimport firebase from '../../services/firebaseConnection'\n\n\nexport default function Novo() {\n                           // Contexto\n  const {user} = useContext(AuthContext)\n\n  const [clientes, setClientes] = useState( [] )\n  const [loading_Cli, setLoading_Cli] = useState( true )\n  const [clienteSelect, setClienteSelect] = useState(0)\n  const [auto, setAuto] = useState( '' )\n  const [placa, setPlaca] = useState( '' )\n  const [servico, setServico] = useState( 'Avaliacao' )\n  const [status, setStatus] = useState( 'Aberto' )\n  const [complemento, setComplemento] = useState('')\n\n// Chama quando abre a aplicação\n  useEffect( () => {\n    \n// Vai trazer clientes la do firebase quando aplicação abrir \n    async function carregaClientes_Firebase() {\n      await firebase.firestore().collection( 'clientes' )\n        .get() //pegar\n        .then( (snapshot) => { // caso de sucesso, recebe snpashot de cliente\n          let lista = []\n          snapshot.forEach( ( doc ) => { //dentro de cliente, para cada documento da um push em obj\n            lista.push( {\n              id: doc.id,\n              nome: doc.data().nome\n\n            })\n          } )\n\n          // Verificando se lista não esta vazia\n          if ( lista.length === 0 ) {\n            console.log( 'Nenhum cliente encontrado' );\n            setClientes( [{ id: '1', cliente: ''}])\n            setLoading_Cli( false )\n            return;\n          }\n          setClientes( lista )\n          setLoading_Cli(false)\n\n        } )\n        .catch( ( erro ) => {\n          console.log( erro );\n          setLoading_Cli( false )\n          setClientes( [{ id: '1', cliente: ''}])\n        })\n  }\n  carregaClientes_Firebase()\n},[])\n\n  // Chamando quando clica em cadastrar\n async function handleRegistrarCliente_Firebase( e ) {\n    e.preventDefault()\n   await firebase.firestore().collection( 'chamados' )\n     .add( {\n       criado: new Date(),\n       cliente: clientes[clienteSelect].nome,\n       clienteID: clientes[clienteSelect].id,\n       auto: auto,\n       placa: placa,\n       servico: servico,\n       status: status,\n       complemento: complemento,\n       userID: user.uid  // usuario que ta cadastrando chamado\n     } )\n     .then( () => {\n       toast.success( 'Chamando cadastrado com sucesso!' )\n       setAuto( '' )\n       setPlaca( '' )\n       setServico( 'Avaliacao' )\n       setStatus('Aberto')\n       setClienteSelect( 0 )\n       setComplemento('')\n       \n     } )\n     .catch( ( erro ) => {\n       console.log( erro );\n       toast.error('Falha a tentar cadastrar!, tente mais tarde.')\n       \n     })\n  }\n\n  // Chamado quando troca serviço e manda pra state\n  function trocaServico_Select( e ) {\n    setServico( e.target.value )\n    console.log(e.target.value);\n  }\n\n  // Chamado quando troca o status, e manda para o state\n  function trocaStatusRadio( e ) {\n    setStatus(e.target.value)\n    console.log(e.target.value);\n  }\n// chamado quando troca cliente\n  function handleTrocaCliente( e ) {\n    console.log( 'index do cli selecionado', e.target.value );\n    console.log( 'Cliente selecionado', clientes[e.target.value] );\n    setClienteSelect(e.target.value)\n}\n\n    return (\n      <div>\n        <Header />\n        <div className='content'>\n          <Title name='Novo Chamado'>\n            <FiPlus size={25}/>\n          </Title>\n\n          <div className='container'>\n\n            <form className='form-profile' onSubmit={handleRegistrarCliente_Firebase}>\n              <label className='tipo'>Pessoa Física / Empresa - cnpj</label>\n              {loading_Cli ? (\n                <input type='text' disabled={true} value='Carregando clientes...' />\n              ) : (\n                      <select value={clienteSelect} onChange={handleTrocaCliente}>\n                      {clientes.map( ( item, index ) => {\n                        return (\n                          <option key={item.id} value={index}>\n                            {item.nome}\n                          </option>\n                        )\n                      })}\n                      </select>\n                )}\n             \n              \n              <label>Automóvel</label>\n                <input className='auto'\n                  type='text'\n                  placeholder='Marca ou Modelo'\n                  value={auto}\n                  onChange={(e)=> setAuto(e.target.value)}\n                />\n                <label>Placa</label>\n                <input className='placa'\n                type='text'\n                placeholder='aaaa000'\n                value={placa}\n                onChange={(e)=> setPlaca(e.target.value)}\n                />\n              \n              <label>Serviço</label>\n              <select value={servico} onChange={trocaServico_Select}>\n                <option value='Avaliacao'>Avaliação</option>\n                <option value='Revisao'>Revisão</option>\n                <option value='Revisao obrigatoria'>Revisão obrigatória</option>\n                <option value='Troca de Bateria'>Troca de bateria</option>\n                <option value='Alinhamento/Balanceamento'>Alinhamento/Balanceamento</option>\n                <option value='Filtro/óleo'>Filtro/óleo</option>\n                <option value='Freios'>Freios</option>\n                <option value='Supensao'>Supensão</option>\n                <option value='Escapamento'>Escapamento</option>\n                <option value='Motor'>Motor</option>\n                <option value='Cambio'>Câmbio</option>\n                <option value='Eletrica'>Eletrica</option>\n                <option value='Computador de bordo'>Computador de bordo</option>\n                <option value='Remap'>Remap</option>\n                <option value='Troca de peca'>Troca de peças</option>\n              </select>\n\n              <label>Status</label>\n              <div className='status'>\n                <input\n                  type='radio'\n                  name='radio'\n                  value='Aberto'\n                  onChange={trocaStatusRadio}\n                  checked={status === 'Aberto'}\n                />\n                <span>Em Aberto</span>\n\n                <input\n                  type='radio'\n                  name='radio'\n                  value='Progresso'\n                  onChange={trocaStatusRadio}\n                  checked={status === 'Progresso'}\n                />\n                <span>Em Progresso</span>\n                <input\n                  type='radio'\n                  name='radio'\n                  value='Finalizado'\n                  onChange={trocaStatusRadio}\n                  checked={status === 'Finalizado'}\n                />\n                <span>Finalizado</span>\n              </div>\n              <label>Complemento</label>\n              <textarea\n                type='text'\n                placeholder='Observações (Opcional).'\n                value={complemento}\n                onChange={(e)=> setComplemento(e.target.value)}\n              />\n              \n              <button className='cadastrar' type='submit'>Cadastrar</button>\n            </form>\n          </div>\n        </div>\n      </div>\n    )\n  }"]},"metadata":{},"sourceType":"module"}