{"ast":null,"code":"import _toConsumableArray from\"/home/juan/\\xC1rea de Trabalho/oficina/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/juan/\\xC1rea de Trabalho/oficina/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/juan/\\xC1rea de Trabalho/oficina/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/juan/\\xC1rea de Trabalho/oficina/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import{Link}from'react-router-dom';import Header from'../../components/Header';import Title from'../../components/Title';import Modal from'../../components/Modal';import'./dashboard.css';import{format}from'date-fns';import{FiMessageSquare,FiPlus,FiSearch,FiEdit2}from'react-icons/fi';import firebase from'../../services/firebaseConnection';// Var de referencia para evitar repetição de codigo\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var listRef=firebase.firestore().collection('chamados').orderBy('criado','desc').limit(5);export default function Dashboard(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),chamados=_useState2[0],setChamados=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),carregarMais=_useState6[0],setCarregarMais=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),estaVazia=_useState8[0],setEstaVazia=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),ultimoDoc_State=_useState10[0],setUltimoDoc_State=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),mostrarPostModal=_useState12[0],setMostrarPostModal=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),detalhes=_useState14[0],setDetalhes=_useState14[1];useEffect(function(){function buscarChamadosFirebase(){return _buscarChamadosFirebase.apply(this,arguments);}function _buscarChamadosFirebase(){_buscarChamadosFirebase=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return listRef.limit(5).get().then(function(snapshot){acessaAndMonta(snapshot);}).catch(function(erro){console.log(erro);setCarregarMais(false);});case 2:setLoading(false);case 3:case\"end\":return _context.stop();}}},_callee);}));return _buscarChamadosFirebase.apply(this,arguments);}buscarChamadosFirebase();return function(){// Para quando o component for desmontado\n};},[]);// Acessado a promisse com a response e montando a lista com chamados\nfunction acessaAndMonta(_x){return _acessaAndMonta.apply(this,arguments);}// Chama quando clica no 'botao buscar mais', busca no firebase\nfunction _acessaAndMonta(){_acessaAndMonta=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(snapshot){var colecaoEstaVazia,lista,ultimoDoc_Var;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:colecaoEstaVazia=snapshot.size===0;if(!colecaoEstaVazia){lista=[];snapshot.forEach(function(doc){lista.push({id:doc.id,auto:doc.data().auto,cliente:doc.data().cliente,clienteID:doc.data().clienteID,placa:doc.data().placa,servico:doc.data().servico,complemento:doc.data().complemento,criado:doc.data().criado,//Formatação da propriedade criado\ncriadoFormt:format(doc.data().criado.toDate(),'dd/MM/yyyy'),status:doc.data().status});});// Para guardar ultimo doc buscado, para evitar duplicação\nultimoDoc_Var=snapshot.docs[snapshot.docs.length-1];setChamados(function(chamados){return[].concat(_toConsumableArray(chamados),lista);});setUltimoDoc_State(ultimoDoc_Var);}else{setEstaVazia(true);}setCarregarMais(false);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _acessaAndMonta.apply(this,arguments);}function handleCarregarMais_Firebase(){return _handleCarregarMais_Firebase.apply(this,arguments);}// Chama quando clica nos icones\nfunction _handleCarregarMais_Firebase(){_handleCarregarMais_Firebase=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setCarregarMais(true);_context3.next=3;return listRef.startAfter(ultimoDoc_State).limit(5)// começa depois do ultimo Doc\n.get().then(function(snapshot){acessaAndMonta(snapshot);}).catch(function(erro){console.log(erro);});case 3:case\"end\":return _context3.stop();}}},_callee3);}));return _handleCarregarMais_Firebase.apply(this,arguments);}function togglePostModal(item){//Sempre envia a negação do valor atual para a state\nsetMostrarPostModal(!mostrarPostModal);setDetalhes(item);}if(loading){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(Title,{name:\"Atendimentos\",children:/*#__PURE__*/_jsx(FiMessageSquare,{size:25})}),/*#__PURE__*/_jsx(\"div\",{className:\"container dashboard\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Buscando Chamados...\"})})]})]});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(Title,{name:\"Chamados\",children:/*#__PURE__*/_jsx(FiMessageSquare,{size:25})}),chamados.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"container dashboard\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Nenhum chamado registrado\"}),/*#__PURE__*/_jsxs(Link,{to:\"/novo\",className:\"novo\",children:[/*#__PURE__*/_jsx(FiPlus,{size:25,color:\"#FFF\"}),\"Novo chamado\"]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Link,{to:\"/novo\",className:\"novo\",children:[/*#__PURE__*/_jsx(FiPlus,{size:25,color:\"#FFF\"}),\"Novo chamado\"]}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Cliente\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Autom\\xF3vel\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Placa\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Servi\\xE7o\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Cadastrado em\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"#\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:chamados.map(function(item,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{\"data-label\":\"Cliente\",children:[\" \",item.cliente,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{\"data-label\":\"Automovel\",children:[\" \",item.auto,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{\"data-label\":\"Placa\",children:[\" \",item.placa,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{\"data-label\":\"Servico\",children:[\" \",item.servico,\" \"]}),/*#__PURE__*/_jsx(\"td\",{\"data-label\":\"Status\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"badge\",style:{backgroundColor:item.status==='Aberto'?'#5cb85c':item.status==='Progresso'?'#F6a935':'#eb0a0a'},children:[item.status,\" \"]})}),/*#__PURE__*/_jsxs(\"td\",{\"data-label\":\"Cadastrado\",children:[\" \",item.criadoFormt,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{\"data-label\":\"#\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"action\",style:{backgroundColor:'#3583'},onClick:function onClick(){return togglePostModal(item);},children:/*#__PURE__*/_jsx(FiSearch,{color:\"#FFF\",size:17})}),/*#__PURE__*/_jsxs(Link,{className:\"action\",style:{backgroundColor:'#F6a935'},to:\"/editar/\".concat(item.id),children:[\" \",/*#__PURE__*/_jsx(FiEdit2,{color:\"#FFF\",size:17})]})]})]},index);})})]}),carregarMais&&/*#__PURE__*/_jsx(\"h3\",{style:{textAlign:'center',marginTop:15},children:\"Buscando dados...\"}),!carregarMais&&!estaVazia&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-mais\",onClick:handleCarregarMais_Firebase,children:\"Buscar mais\"})]})]}),mostrarPostModal&&/*#__PURE__*/_jsx(Modal,{conteudo:detalhes,close:togglePostModal})]});}","map":{"version":3,"sources":["/home/juan/Área de Trabalho/oficina/src/pages/Dashboard/index.js"],"names":["useState","useEffect","Link","Header","Title","Modal","format","FiMessageSquare","FiPlus","FiSearch","FiEdit2","firebase","listRef","firestore","collection","orderBy","limit","Dashboard","chamados","setChamados","loading","setLoading","carregarMais","setCarregarMais","estaVazia","setEstaVazia","ultimoDoc_State","setUltimoDoc_State","mostrarPostModal","setMostrarPostModal","detalhes","setDetalhes","buscarChamadosFirebase","get","then","snapshot","acessaAndMonta","catch","erro","console","log","colecaoEstaVazia","size","lista","forEach","doc","push","id","auto","data","cliente","clienteID","placa","servico","complemento","criado","criadoFormt","toDate","status","ultimoDoc_Var","docs","length","handleCarregarMais_Firebase","startAfter","togglePostModal","item","map","index","backgroundColor","textAlign","marginTop"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport {Link} from 'react-router-dom'\nimport Header from '../../components/Header'\nimport Title from '../../components/Title'\nimport Modal from '../../components/Modal'\nimport './dashboard.css'\nimport {format} from 'date-fns'\nimport { FiMessageSquare, FiPlus, FiSearch, FiEdit2 } from 'react-icons/fi'\n\nimport firebase from '../../services/firebaseConnection'\n\n// Var de referencia para evitar repetição de codigo\nconst listRef = firebase.firestore().collection( 'chamados' ).orderBy( 'criado', 'desc' )\n.limit(5)\n\n\nexport default function Dashboard() {\n  const [chamados, setChamados] = useState( [] )\n  const [loading, setLoading] = useState( true )\n  const [carregarMais, setCarregarMais] = useState( false )\n  const [estaVazia, setEstaVazia] = useState( false )\n  const [ultimoDoc_State, setUltimoDoc_State] = useState()\n  const [mostrarPostModal, setMostrarPostModal] = useState( false )\n  const [detalhes, setDetalhes] = useState()\n  \n  useEffect( () => {\n\n    async function buscarChamadosFirebase() {\n      await listRef.limit( 5 )\n        .get()\n        .then( (snapshot) => {\n          acessaAndMonta(snapshot)\n        } )\n        .catch( ( erro ) => {\n          console.log( erro );\n          setCarregarMais(false)\n        } )\n      setLoading(false)\n    }\n   \n    buscarChamadosFirebase()\n\n    return () => {\n      // Para quando o component for desmontado\n    }\n  }, [] )\n  \n\n\n  // Acessado a promisse com a response e montando a lista com chamados\n  async function acessaAndMonta( snapshot ) {\n    const colecaoEstaVazia = snapshot.size === 0\n\n    if ( !colecaoEstaVazia ) {\n      let lista = []\n\n      snapshot.forEach(doc => {\n        lista.push( {\n          id: doc.id,\n          auto: doc.data().auto,\n          cliente: doc.data().cliente,\n          clienteID: doc.data().clienteID,\n          placa: doc.data().placa,\n          servico: doc.data().servico,\n          complemento: doc.data().complemento,\n          criado: doc.data().criado,\n          //Formatação da propriedade criado\n          criadoFormt: format( doc.data().criado.toDate(), 'dd/MM/yyyy' ),\n          status: doc.data().status\n        })\n      } );\n\n      // Para guardar ultimo doc buscado, para evitar duplicação\n      const ultimoDoc_Var = snapshot.docs[snapshot.docs.length - 1]\n      setChamados( chamados => [...chamados, ...lista] )\n      setUltimoDoc_State(ultimoDoc_Var)\n    \n    } else {\n      setEstaVazia(true)\n    }\n\n    setCarregarMais(false)\n  }\n\n  // Chama quando clica no 'botao buscar mais', busca no firebase\n async function handleCarregarMais_Firebase() {\n   setCarregarMais( true )\n   await listRef.startAfter( ultimoDoc_State ).limit( 5 ) // começa depois do ultimo Doc\n     .get()\n     .then( (snapshot) => {\n      acessaAndMonta(snapshot)\n     } )\n     .catch( ( erro ) => {\n     console.log(erro);\n   })\n   \n}\n// Chama quando clica nos icones\n  function togglePostModal( item ) {\n    //Sempre envia a negação do valor atual para a state\n    setMostrarPostModal( !mostrarPostModal )\n    setDetalhes(item)\n  }\n\n  if ( loading ) {\n    return(\n    <div>\n      <Header/>\n     <div className='content'>\n       <Title name='Atendimentos'>\n         <FiMessageSquare size={25}/>\n        </Title>\n\n        <div className='container dashboard'>\n            <span>Buscando Chamados...</span>\n        </div>\n\n        </div>\n      </div>\n      )\n}\n\n return (\n   <div>\n     <Header/>\n     <div className='content'>\n       <Title name='Chamados'>\n         <FiMessageSquare size={25}/>\n       </Title>\n       \n       {/* Renderiza quando não tem chamados */}\n       {chamados.length === 0 ? (\n         <div className='container dashboard'>\n         <span>Nenhum chamado registrado</span>\n         \n         <Link to='/novo' className='novo'>\n              <FiPlus size={25} color='#FFF'/>\n                      Novo chamado\n         </Link>\n       </div>\n       ) : (\n           <>\n           <Link to='/novo' className='novo'>\n             <FiPlus size={25} color='#FFF'/>\n                   Novo chamado\n             </Link>\n             \n             <table>\n               {/* Tag cabeçalho */}\n               <thead>\n                 <tr> \n                   <th scope='col'>Cliente</th>\n                   <th scope='col'>Automóvel</th>\n                   <th scope='col'>Placa</th>\n                   <th scope='col'>Serviço</th>\n                   <th scope='col'>Status</th>\n                   <th scope='col'>Cadastrado em</th>\n                   <th scope='col'>#</th>\n                 </tr>\n               </thead>\n               <tbody>\n               {chamados.map( (item, index) => {\n                    return (\n                        <tr key={index}>\n                        <td data-label='Cliente'> {item.cliente } </td>\n                        <td data-label='Automovel'> {item.auto} </td>\n                        <td data-label='Placa'> {item.placa} </td>\n                        <td data-label='Servico'> {item.servico} </td>\n                        <td data-label='Status'>\n                          <span className='badge'\n                            style={{ backgroundColor: item.status === 'Aberto' ? '#5cb85c'\n                              : item.status === 'Progresso' ? '#F6a935' : '#eb0a0a'}}>\n                            {item.status} </span>\n                        </td>\n                        <td data-label='Cadastrado'> {item.criadoFormt} </td>\n                        <td data-label='#'>\n                          <button className='action' style={{backgroundColor:'#3583'} } onClick={()=> togglePostModal(item)}>\n                            <FiSearch color='#FFF' size={17}/>\n                          </button>                                                  \n                          <Link className='action' style={{backgroundColor:'#F6a935'} } to={`/editar/${item.id}`}> {/* navega ate rota novo passando id do item clicado*/}\n                            <FiEdit2 color='#FFF' size={17}/>\n                          </Link>\n                        </td>\n                      </tr>\n                    )\n                 })}\n                \n                </tbody>\n\n             </table>\n             {carregarMais &&\n               <h3 style={{ textAlign: 'center', marginTop: 15 }}>Buscando dados...</h3>}\n             {!carregarMais && !estaVazia\n               && <button className='btn-mais'\n                 onClick={handleCarregarMais_Firebase}>Buscar mais</button>}\n         </>\n       )}\n\n       \n     </div>\n     {/* Se for true, renderiza */}\n     {mostrarPostModal && (\n       <Modal conteudo={detalhes} close={togglePostModal} />\n       \n     )}\n   </div>\n );\n}"]},"metadata":{},"sourceType":"module"}