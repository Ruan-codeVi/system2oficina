{"ast":null,"code":"var _jsxFileName = \"/home/juan/Documentos/Front-End_Projetos-React.js/oficina/src/pages/Profile/index.js\",\n    _s = $RefreshSig$();\n\nimport './profile.css';\nimport avatarDefaul from '../../assets/avatar.png';\nimport { FiSettings, FiUpload } from 'react-icons/fi';\nimport Header from '../../components/Header';\nimport Title from '../../components/Title';\nimport { useState, useContext } from 'react';\nimport { AuthContext } from '../../contexts/auth';\nimport firebase from '../../services/firebaseConnection';\nimport { fuchsia } from 'color-name';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Profile() {\n  _s();\n\n  // Context\n  const {\n    user,\n    deslogarFirebase,\n    setUser,\n    saveStorageUser\n  } = useContext(AuthContext); // Estados\n\n  const [nome, setNome] = useState(user && user.nome);\n  const [email, setEmail] = useState(user && user.email);\n  const [avatarUrl, setAvatarUrl] = useState(user && user.avatarUrl); // Para quando o usuario enviar a foto, salvar em um state separada\n\n  const [imageEnvi, setImageEnvi] = useState(null); // Função para previous da imagem de avatar antes do submit\n\n  function handlePreviousImage(e) {\n    if (e.target.files[0]) {\n      // Selecionou alguma imagem?\n      const image = e.target.files[0];\n\n      if (image.type === 'image/jpeg' || image.type === 'image/jpg' || image.type === 'image/png' || image.type === 'image/gif') {\n        setImageEnvi(image);\n        setAvatarUrl(URL.createObjectURL(e.target.files[0])); //Criando o previous\n      } else {\n        alert('Envie imagem dos tipos: JPEG/JPG/PNG ou GIF');\n        setImageEnvi(null);\n        return null;\n      }\n    }\n  } //Upload de imagem no firabase store\n\n\n  async function handleUploadImage() {\n    const atualUid = user.uid;\n    const upLoadImg = await firebase.storage().ref(`images/${atualUid}/${imageEnvi.name}`).put(imageEnvi).then(async () => {\n      console.log('Foto enviada com sucesso'); //  Pegando a Url da foto enviada para relacionar no firestone\n\n      await firebase.storage().ref(`images/${atualUid}`).child(imageEnvi.name).getDownloadURL() //  Caso consiga pegar a Url da foto\n      .then(async url => {\n        let urlFoto = url;\n        await firebase.firestore().collection('users').doc(user.uid).update();\n      });\n    });\n  }\n\n  async function handleSave(e) {\n    e.preventDefault(); // Para caso queira mudar só o nome\n\n    if (imageEnvi === null && nome !== '') {\n      // Indo no firab\n      await firebase.firestore().collection('users').doc(user.uid).update({\n        nome: nome\n      }).then(() => {\n        // Refletindo o update para o context\n        let data = { ...user,\n          // pegando tudo que ja tem em user\n          nome: nome // Passando o nome digitado para esse obj\n\n        };\n        setUser(data);\n        saveStorageUser(data);\n      }).catch(erro => {\n        console.log(erro);\n      });\n    } //Para caso queira mudar só foto\n    else if (nome !== '' && imageEnvi !== null) {\n        handleUploadImage();\n      }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 6\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        name: \"Meu perfil\",\n        children: /*#__PURE__*/_jsxDEV(FiSettings, {\n          size: 25\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 10\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 8\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"form-profile\",\n          onSubmit: handleSave,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"label-avatar\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: /*#__PURE__*/_jsxDEV(FiUpload, {\n                color: \"#FFF\",\n                size: 25\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 20\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              accept: \"image/*\",\n              onChange: handlePreviousImage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 82\n            }, this), avatarUrl === null ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: avatarDefaul,\n              width: \"250\",\n              height: \"250\",\n              alt: \"Foto de perfil padr\\xE3o\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 16\n            }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n              src: avatarUrl,\n              width: \"250\",\n              height: \"250\",\n              alt: \"Foto de perfil padr\\xE3o\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 18\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Nome\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: nome,\n            onChange: e => setNome(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"E-mail\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: email,\n            disabled: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: \"Salvar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 12\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 10\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 8\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"logout-btn\",\n          onClick: () => deslogarFirebase(),\n          children: \"Sair\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 8\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 6\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 4\n  }, this);\n}\n\n_s(Profile, \"FhMfkdcEe6FwSkYxSWMbr3x0c1g=\");\n\n_c = Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["/home/juan/Documentos/Front-End_Projetos-React.js/oficina/src/pages/Profile/index.js"],"names":["avatarDefaul","FiSettings","FiUpload","Header","Title","useState","useContext","AuthContext","firebase","fuchsia","Profile","user","deslogarFirebase","setUser","saveStorageUser","nome","setNome","email","setEmail","avatarUrl","setAvatarUrl","imageEnvi","setImageEnvi","handlePreviousImage","e","target","files","image","type","URL","createObjectURL","alert","handleUploadImage","atualUid","uid","upLoadImg","storage","ref","name","put","then","console","log","child","getDownloadURL","url","urlFoto","firestore","collection","doc","update","handleSave","preventDefault","data","catch","erro","value"],"mappings":"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","sourcesContent":["import './profile.css'\nimport avatarDefaul from '../../assets/avatar.png'\nimport {FiSettings, FiUpload} from 'react-icons/fi'\nimport Header from '../../components/Header'\nimport Title from '../../components/Title'\nimport { useState, useContext } from 'react'\nimport { AuthContext } from '../../contexts/auth'\nimport firebase from '../../services/firebaseConnection'\nimport { fuchsia } from 'color-name'\n\n\n\nexport default function Profile() {\n  // Context\n  const { user, deslogarFirebase, setUser, saveStorageUser } = useContext( AuthContext )\n  // Estados\n  const [nome, setNome] = useState(user && user.nome)\n  const [email, setEmail] = useState(user && user.email)\n  const [avatarUrl, setAvatarUrl] = useState( user && user.avatarUrl )\n  // Para quando o usuario enviar a foto, salvar em um state separada\n  const [imageEnvi, setImageEnvi] = useState(null)\n  \n// Função para previous da imagem de avatar antes do submit\n  function handlePreviousImage(e) {\n\n    if ( e.target.files[0] ) { // Selecionou alguma imagem?\n      const image = e.target.files[0]\n      \n      if ( image.type === 'image/jpeg' || image.type === 'image/jpg'\n        || image.type === 'image/png' || image.type === 'image/gif' ) {\n        \n        setImageEnvi( image )\n        setAvatarUrl(URL.createObjectURL(e.target.files[0])) //Criando o previous\n      } else {\n        alert('Envie imagem dos tipos: JPEG/JPG/PNG ou GIF')\n        setImageEnvi(null)\n        return null\n      }\n    }\n  \n  }\n\n\n\n  //Upload de imagem no firabase store\n async function handleUploadImage() {\n   const atualUid = user.uid\n   \n   const upLoadImg = await firebase.storage()\n   .ref( `images/${atualUid}/${imageEnvi.name}` )\n   .put( imageEnvi )\n     .then(async () => {\n       console.log( 'Foto enviada com sucesso' );\n\n      //  Pegando a Url da foto enviada para relacionar no firestone\n       await firebase.storage().ref( `images/${atualUid}` )\n      .child( imageEnvi.name ).getDownloadURL()\n        //  Caso consiga pegar a Url da foto\n         .then( async ( url ) => {\n           let urlFoto = url;\n\n           await firebase.firestore().collection( 'users' )\n           .doc( user.uid )\n           .update()\n       })\n   })\n  }\n\n  async function handleSave( e ) {\n    e.preventDefault()\n\n    // Para caso queira mudar só o nome\n    if ( imageEnvi === null && nome !== '' ) {\n      // Indo no firab\n      await firebase.firestore().collection( 'users' )\n      .doc( user.uid )\n      .update( {\n        nome: nome\n      } )\n        .then( () => {\n          // Refletindo o update para o context\n          let data = {\n            ...user,  // pegando tudo que ja tem em user\n            nome: nome // Passando o nome digitado para esse obj\n          };\n          setUser( data )\n          saveStorageUser(data)\n         } )\n        .catch( ( erro ) => {\n        console.log(erro)\n      })\n    } //Para caso queira mudar só foto\n    else if(nome !=='' && imageEnvi !== null ) {\n      handleUploadImage()\n    }\n}\n\n return (\n   <div>\n     <Header />\n     \n     <div className='content'>\n       <Title name='Meu perfil'>\n         <FiSettings size={25}/>\n       </Title>\n       \n\n       <div className='container'>\n         <form className='form-profile' onSubmit={handleSave}>\n           <label className='label-avatar'>\n             <span><FiUpload color='#FFF' size={25} /></span>\n             <input type='file' accept='image/*'onChange={handlePreviousImage} /><br />\n             {avatarUrl === null ?\n               <img src={avatarDefaul} width='250' height='250' alt='Foto de perfil padrão' />\n               : <img src={avatarUrl} width='250' height='250' alt='Foto de perfil padrão'/> \n            }\n           </label>\n\n           <label>Nome</label>\n           <input type='text' value={nome} onChange={(e)=> setNome(e.target.value) }/>\n           <label>E-mail</label>\n           <input type='text' value={email} disabled={true} />\n           <button type='submit'>Salvar</button>\n        </form>\n       </div>\n\n       <div className='container'>\n            <button className='logout-btn' onClick={()=> deslogarFirebase()}>\n              Sair\n            </button>\n       </div>\n     </div>\n\n   </div>\n );\n}"]},"metadata":{},"sourceType":"module"}