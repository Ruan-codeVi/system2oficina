{"ast":null,"code":"var _jsxFileName = \"/home/juan/Documentos/Front-End_Projetos-React.js/oficina/src/pages/New/index.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect, useContext } from 'react';\nimport './novo.css';\nimport { toast } from 'react-toastify';\nimport Header from '../../components/Header';\nimport Title from '../../components/Title';\nimport { FiPlusCircle } from 'react-icons/fi';\nimport { AuthContext } from '../../contexts/auth';\nimport firebase from '../../services/firebaseConnection';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function New() {\n  _s();\n\n  // Contexto\n  const {\n    user\n  } = useContext(AuthContext); // Estados\n\n  const [servico, setServico] = useState('Avaliacao');\n  const [status, setStatus] = useState('Aberto');\n  const [automovel, setAutomovel] = useState('');\n  const [placa, setPlaca] = useState('');\n  const [clientes, setClientes] = useState([]);\n  const [loadClientesState, setLoadClientesState] = useState(true);\n  const [clintesInputSelect, setClintesInputSelect] = useState(0);\n  useEffect(() => {\n    // Carregando clientes cadastrados no firebase\n    async function loadClientes() {\n      // Indo no firebase buscar a coleção de clientes\n      await firebase.firestore().collection('clientes').get().then(snapshot => {\n        let lista = [];\n        snapshot.forEach(doc => {\n          lista.push({\n            id: doc.id,\n            nome: doc.data().nome\n          });\n        }); //Se não tiver nenhum cliente cadastradi no firebase\n\n        if (lista.length === 0) {\n          console.log('Nenhum cliente encontrado');\n          setClientes({\n            id: '1',\n            nome: ''\n          });\n          setLoadClientesState(false);\n          return;\n        }\n\n        setClientes(lista);\n        setLoadClientesState(false);\n      }).catch(erro => {\n        console.log(erro);\n        setLoadClientesState(false);\n        setClientes({\n          id: '1',\n          nome: ''\n        });\n      });\n    }\n\n    loadClientes();\n  }, []); //Registrando novo chamado no firabase\n\n  async function cadastrarChamadoFirebase(e) {\n    e.preventDefault();\n    await firebase.firestore().collection('chamados').add({\n      criado: new Date(),\n      cliente: clientes[clintesInputSelect].nome,\n      clienteID: clientes[clintesInputSelect].id,\n      servico: servico,\n      status: status,\n      automovel: automovel,\n      placa: placa,\n      userID: user.uid\n    }).then(() => {\n      toast.success('Chamado criado com sucesso!');\n      setAutomovel('');\n      setPlaca('');\n      setClintesInputSelect(0);\n    }).catch(erro => {\n      toast.error('Erro a tentar cadastrar, tente de novo!');\n      console.log(erro);\n    });\n  } // Chamando quando troca servico\n\n\n  function trocaOpcaoSelect(e) {\n    setServico(e.target.value);\n  } // Chama quando troca status\n\n\n  function trocaOpcaoRadio(e) {\n    setStatus(e.target.value);\n  } //Chama quando troca cliente\n\n\n  function handleMudarClientes(e) {\n    // console.log('Index do cliente selecionado:', e.target.value);\n    // console.log( ' Cliente selecionado:', clientes[e.target.value] );\n    setClintesInputSelect(e.target.value);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 6\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        name: \"Novo chamado\",\n        children: /*#__PURE__*/_jsxDEV(FiPlusCircle, {\n          size: 25\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 10\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 8\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"form-profile chamado\",\n          onSubmit: cadastrarChamadoFirebase,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Cliente\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 12\n          }, this), loadClientesState ? /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            disabled: true,\n            value: \"Carregando clientes...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 14\n          }, this) : /*#__PURE__*/_jsxDEV(\"select\", {\n            value: clintesInputSelect,\n            onChange: handleMudarClientes,\n            children: clientes.map((item, index) => {\n              return /*#__PURE__*/_jsxDEV(\"option\", {\n                value: index,\n                children: item.nome\n              }, item.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Servi\\xE7o\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: servico,\n            onChange: trocaOpcaoSelect,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Avaliacao\",\n              children: \"Avalia\\xE7\\xE3o\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Revisao\",\n              children: \"Revis\\xE3o\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Troca de Oleo / Filtro\",\n              children: \"Troca de \\xF3leo / Filtro\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Alinhamento-Balanceamento\",\n              children: \"Alinhamento/Balanceamento\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Revisao Obrigatoria\",\n              children: \"Revis\\xE3o obrigat\\xF3ria\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Manutencao Preventiva\",\n              children: \"Manuten\\xE7\\xE3o preventiva\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Manutencao Corretiva\",\n              children: \"Manuten\\xE7\\xE3o corretiva\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Remap\",\n              children: \"Remap\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Eletrica\",\n              children: \"Eletrica\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"status\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"radio\",\n              value: \"Aberto\",\n              onChange: trocaOpcaoRadio,\n              checked: status === 'Aberto'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Em Aberto\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"radio\",\n              value: \"Progresso\",\n              onChange: trocaOpcaoRadio,\n              checked: status === 'Progresso'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Em Progresso\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"radio\",\n              value: \"Atendido\",\n              onChange: trocaOpcaoRadio,\n              checked: status === 'Atendido'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Atendido\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 14\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 18\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Autom\\xF3vel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 36\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            type: \"text\",\n            placeholder: \" marca ou modelo\",\n            value: automovel,\n            onChange: e => setAutomovel(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Placa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 32\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"placa\",\n            type: \"text\",\n            placeholder: \"Placa\",\n            value: placa,\n            onChange: e => setPlaca(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: \"Cadastrar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 12\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 10\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 8\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 6\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 4\n  }, this);\n}\n\n_s(New, \"jC3ICmV2XY0iBBbt8Gi/j5LoJS0=\");\n\n_c = New;\n\nvar _c;\n\n$RefreshReg$(_c, \"New\");","map":{"version":3,"sources":["/home/juan/Documentos/Front-End_Projetos-React.js/oficina/src/pages/New/index.js"],"names":["useState","useEffect","useContext","toast","Header","Title","FiPlusCircle","AuthContext","firebase","New","user","servico","setServico","status","setStatus","automovel","setAutomovel","placa","setPlaca","clientes","setClientes","loadClientesState","setLoadClientesState","clintesInputSelect","setClintesInputSelect","loadClientes","firestore","collection","get","then","snapshot","lista","forEach","doc","push","id","nome","data","length","console","log","catch","erro","cadastrarChamadoFirebase","e","preventDefault","add","criado","Date","cliente","clienteID","userID","uid","success","error","trocaOpcaoSelect","target","value","trocaOpcaoRadio","handleMudarClientes","map","item","index"],"mappings":"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","sourcesContent":["import {useState, useEffect, useContext} from 'react';\nimport './novo.css'\nimport {toast} from 'react-toastify'\nimport Header from '../../components/Header';\nimport Title from '../../components/Title';\nimport { FiPlusCircle } from 'react-icons/fi'\nimport { AuthContext } from '../../contexts/auth'\nimport firebase from '../../services/firebaseConnection'\n\nexport default function New() {\n  // Contexto\nconst {user} = useContext(AuthContext)\n\n  // Estados\nconst [servico, setServico] = useState('Avaliacao')\nconst [status, setStatus] = useState( 'Aberto' )\nconst [automovel, setAutomovel] = useState('')\nconst [placa, setPlaca] = useState('')\nconst [clientes, setClientes] = useState( [] )\nconst [loadClientesState, setLoadClientesState] = useState( true )\nconst [clintesInputSelect, setClintesInputSelect] = useState(0)  \n  \n  useEffect( () => {\n  // Carregando clientes cadastrados no firebase\n    async function loadClientes() {\n      // Indo no firebase buscar a coleção de clientes\n      await firebase.firestore().collection( 'clientes' )\n      .get()\n        .then( (snapshot) => {\n          let lista = []\n          snapshot.forEach( ( doc ) => {\n            lista.push( {\n              id: doc.id,\n              nome: doc.data().nome\n            })\n          } )\n        //Se não tiver nenhum cliente cadastradi no firebase\n          if ( lista.length === 0 ) {\n            console.log( 'Nenhum cliente encontrado' );\n            setClientes( { id: '1', nome: '' } )\n            setLoadClientesState( false )\n            return;\n          }\n          setClientes( lista )\n          setLoadClientesState(false)\n      } )\n        .catch( ( erro ) => {\n          console.log(erro);\n          setLoadClientesState( false )\n          setClientes({id: '1', nome:''})\n      })\n    }\n\n    loadClientes()\n\n  },[])\n \n  //Registrando novo chamado no firabase\n async function cadastrarChamadoFirebase( e ) {\n    e.preventDefault()\n    \n   await firebase.firestore().collection( 'chamados' )\n     .add( {\n       criado: new Date(),\n       cliente: clientes[clintesInputSelect].nome,\n       clienteID: clientes[clintesInputSelect].id,\n       servico: servico,\n       status: status,\n       automovel: automovel,\n       placa: placa,\n       userID: user.uid\n     } )\n     .then( () => {\n       toast.success( 'Chamado criado com sucesso!' )\n       setAutomovel( '' )\n       setPlaca('')\n       setClintesInputSelect(0)\n     } )\n     .catch( ( erro ) => {\n       toast.error('Erro a tentar cadastrar, tente de novo!')\n     console.log(erro);\n   })\n  }\n  // Chamando quando troca servico\n  function trocaOpcaoSelect(e){\n    setServico( e.target.value )\n    \n  \n  }\n  // Chama quando troca status\n  function trocaOpcaoRadio( e ) {\n    setStatus( e.target.value )\n    \n  }\n  //Chama quando troca cliente\n  function handleMudarClientes(e) {\n    // console.log('Index do cliente selecionado:', e.target.value);\n    // console.log( ' Cliente selecionado:', clientes[e.target.value] );\n    setClintesInputSelect(e.target.value)\n  }\n\n return (\n   <div>\n     <Header />\n     \n     <div className='content'>\n       <Title name='Novo chamado'>\n         <FiPlusCircle size={25}/>\n       </Title>\n       \n       <div className='container'>\n         <form className='form-profile chamado' onSubmit={cadastrarChamadoFirebase}>\n           <label>Cliente</label>\n           {loadClientesState ? (\n             <input type='text' disabled={true} value='Carregando clientes...'/>\n           ) : (\n            <select value={clintesInputSelect} onChange={handleMudarClientes}>\n            {/* Entrando no estado de cliente para pecorrer as informação já que é um array\n                Pegando o elemento e a posição */}\n                {clientes.map( ( item, index ) => {\n                    return (\n                    <option key={item.id} value={index}>\n                          {item.nome}\n                     </option>\n                    )\n                 })}\n               </select>\n             )\n           }\n          \n           <label>Serviço</label>\n           <select value={servico} onChange={trocaOpcaoSelect}>\n              <option value='Avaliacao'>Avaliação</option>\n              <option value='Revisao'>Revisão</option>\n              <option value='Troca de Oleo / Filtro'>Troca de óleo / Filtro</option>\n             \n              <option value='Alinhamento-Balanceamento'>Alinhamento/Balanceamento</option>\n              <option value='Revisao Obrigatoria'>Revisão obrigatória</option>\n              <option value='Manutencao Preventiva'>Manutenção preventiva</option>\n              <option value='Manutencao Corretiva'>Manutenção corretiva</option>\n              <option value='Remap'>Remap</option>\n              <option value='Eletrica'>Eletrica</option>\n           </select>\n           \n           \n           <label>Status</label>\n           <div className='status'>\n             <input type='radio' name='radio' value='Aberto'\n               onChange={trocaOpcaoRadio} checked={status === 'Aberto'}/>\n             <span>Em Aberto</span>\n\n             <input type='radio' name='radio' value='Progresso'\n               onChange={trocaOpcaoRadio} checked={status === 'Progresso'} />\n             <span>Em Progresso</span>\n\n             <input type='radio' name='radio' value='Atendido'\n               onChange={trocaOpcaoRadio} checked={status === 'Atendido'} />\n             <span>Atendido</span>\n           </div><br/>\n           \n           <label>Automóvel</label><br/>\n           <textarea type='text' placeholder=' marca ou modelo'\n             value={automovel} onChange={(e)=> setAutomovel(e.target.value) }/>\n           <label>Placa</label><br />\n           <input className='placa' type='text' placeholder='Placa' value={placa} onChange={(e) => setPlaca(e.target.value)}/>\n           <button type='submit'>Cadastrar</button>\n         </form>\n        </div>\n     </div>\n   </div>\n );\n}"]},"metadata":{},"sourceType":"module"}